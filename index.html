<!DOCTYPE html>
<html lang="en">

<head>
    <title>Morrowind Class Quiz"</title>
    <meta charset="UTF-8">
    <style>
        body {
            background-color: black;
        }

        button, img {
            margin-left: auto;
            margin-right: auto;
            display: block;
        }

        h2, h3,
        p {
            color: white;
            text-align: center;
        }

        #top-padding {
            height: 200px;
        }
    </style>

    <script src="jquery.min.js"></script>
</head>

<body>
<div id='top-padding'></div>

<div id='audio-message'>
    <h2>This application is mainly audio. Please have audio enabled and set to a reasonable volume.</h2>
</div>
<button id='button-1' onclick="playAudio1()">Climb up to the boat deck</button>
<button id='button-2' style="display: none;" onclick="playAudio2()">Walk off the boat</button>
<button id='button-3' style="display: none;" onclick="playAudio3()">Pick your race</button>
<button id='button-4' style="display: none;" onclick="playAudio4()">Enter the census office</button>
<button id='button-5' style="display: none;" onclick="playAudio5()">Take the class quiz</button>

<div id=quiz-question-1 style="display: none;">
    <p>
        On a clear day you chance upon a strange animal, its leg trapped in a hunter's clawsnare. Judging from the
        bleeding it will not survive long.
    </p>
    <button onclick="incrementCombat()">
        Draw your dagger, mercifully ending its life with a single thrust.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Use herbs from your pack to put it to sleep.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Do not interfere in the natural evolution of events, but rather take the opportunity to learn more about a
        strange animal you have never seen before.
    </button>
</div>

<div id=quiz-question-2 style="display: none;">
    <p>
        One Summer afternoon your father gives you a choice of chores.
    </p>
    <button onclick="incrementCombat()">
        Work in the forge with him casting iron for a new plow.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Gather herbs for your mother who is preparing dinner.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Go catch fish at the stream using a net and line.
    </button>
</div>

<div id=quiz-question-3 style="display: none;">
    <p>
        Your cousin has given you a very embarrassing nickname and, even worse, likes to call you it in front of
        your friends. You asked him to stop, but he finds it very amusing to watch you blush.
    </p>
    <button onclick="incrementCombat()">
        Beat up your cousin, then tell him that if he ever calls you that nickname again, you will bloody him worse
        than this time.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Make up a story that makes your nickname a badge of honor instead of something humiliating.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Make up an even more embarrassing nickname for him and use it constantly until he learns his lesson.
    </button>
</div>

<div id=quiz-question-4 style="display: none;">
    <p>
        There is a lot of heated discussion at the local tavern over a group of people called 'Telepaths'. They have
        been hired by certain City-State kings. Rumor has it these Telepaths read a person's mind and tell their
        lord whether a follower is telling the truth or not.
    </p>
    <button onclick="incrementCombat()">
        This is a terrible practice. A person's thoughts are his own and no one, not even a king, has the right to
        make such an invasion into another human's mind.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Loyal followers to the king have nothing to fear from a Telepath. It is important to have a method of
        finding assassins and spies before it is too late.
    </button>
    <br>
    <button onclick="incrementStealth()">
        In these times, it is a necessary evil. Although you do not necessarily like the idea, a Telepath could have
        certain advantages during a time of war or in finding someone innocent of a crime.
    </button>
</div>

<div id=quiz-question-5 style="display: none;">
    <p>
        Your mother sends you to the market with a list of goods to buy. After you finish you find that by mistake a
        shopkeeper has given you too much money back in exchange for one of the items.
    </p>
    <button onclick="incrementCombat()">
        Return to the store and give the shopkeeper his hard-earned money, explaining to him the mistake.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Decide to put the extra money to good use and purchase items that would help your family.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Pocket the extra money, knowing that shopkeepers in general tend to overcharge customers anyway.
    </button>
</div>

<div id=quiz-question-6 style="display: none;">
    <p>
        While in the market place you witness a thief cut a purse from a noble. Even as he does so, the noble
        notices and calls for the city guards. In his haste to get away, the thief drops the purse near you.
        Surprisingly no one seems to notice the bag of coins at your feet.
    </p>
    <button onclick="incrementCombat()">
        Pick up the bag and signal to the guard, knowing that the only honorable thing to do is return the money to
        its rightful owner.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Leave the bag there, knowing that it is better not to get involved.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Pick up the bag and pocket it, knowing that the extra windfall will help your family in times of trouble.
    </button>
</div>

<div id=quiz-question-7 style="display: none;">
    <p>
        Your father sends you on a task which you loathe, cleaning the stables. On the way there, pitchfork in hand,
        you run into your friend from the homestead near your own. He offers to do it for you, in return for a
        future favor of his choosing.
    </p>
    <button onclick="incrementCombat()">
        Decline his offer, knowing that your father expects you to do the work, and it is better not to be in debt.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Ask him to help you, knowing that two people can do the job faster than one, and agree to help him with one
        task of his choosing in the future.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Accept his offer, reasoning that as long as the stables are cleaned, it matters not who does the cleaning.
    </button>
</div>

<div id=quiz-question-8 style="display: none;">
    <p>
        Your mother asks you to help fix the stove. While you are working, a very hot pipe slips its mooring and
        falls towards her.
    </p>
    <button onclick="incrementCombat()">
        Position yourself between the pipe and your mother.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Grab the hot pipe and try to push it away.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Push your mother out of the way.
    </button>
</div>

<div id=quiz-question-9 style="display: none;">
    <p>
        While in town the baker gives you a sweetroll. Delighted, you take it into an alley to enjoy only to be
        intercepted by a gang of three other kids your age. The leader demands the sweetroll, or else he and his
        friends will beat you and take it.
    </p>
    <button onclick="incrementCombat()">
        Drop the sweetroll and step on it, then get ready for the fight.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Give him the sweetroll now without argument, knowing that later this afternoon you will have all your
        friends with you and can come and take whatever he owes you.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Act like you're going to give him the sweetroll, but at the last minute throw it in the air, hoping that
        they'll pay attention to it long enough for you to get a shot in on the leader.
    </button>
</div>

<div id=quiz-question-10 style="display: none;">
    <p>
        Entering town you find that you are witness to a very well-dressed man running from a crowd. He screams to
        you for help. The crowd behind him seem very angry.
    </p>
    <button onclick="incrementCombat()">
        Rush to the town's aid immediately, despite your lack of knowledge of the circumstances.
    </button>
    <br>
    <button onclick="incrementMagic()">
        Stand aside and allow the man and the mob to pass, realizing it is probably best not to get involved.
    </button>
    <br>
    <button onclick="incrementStealth()">
        Rush to the man's aid immediately, despite your lack of knowledge of the circumstances.
    </button>
</div>

<div id="quiz-result" style="display: none;">
    <h3>You are a: <span id="class-name"></span></h3>
    <img id="class-image" src="">
    <p id="class-description"></p>
    <br>
    <button onclick="restartQuiz()">
        Restart quiz
    </button>
</div>

</body>

<script>
    let currentQuestion = 1;

    let combatCount = 0;
    let magicCount = 0;
    let stealthCount = 0;

    let incrementCombat = () => {
        combatCount++
        nextQuestion()
    }
    let incrementMagic = () => {
        magicCount++
        nextQuestion()
    }
    let incrementStealth = () => {
        stealthCount++
        nextQuestion()
    }

    let nextQuestion = () => {
        if (currentQuestion === 10) {
            displayResult()
            return
        }

        $('#quiz-question-' + currentQuestion).hide()

        currentQuestion++

        $('#quiz-question-' + currentQuestion).show()

        new Audio('audio-files/' + (4 + currentQuestion) + '-quiz-' + currentQuestion + '.mp3').play()
    }

    let playAudio = (fileName, button1, button2, timeout) => {
        new Audio(fileName).play();
        $(button1).hide()

        setTimeout(() => {
            $(button2).show()
        }, timeout);
    }
    let playAudio1 = () => {
        let themeAudio = new Audio('audio-files/theme.mp3')
        themeAudio.loop = true
        themeAudio.volume = 0.15
        themeAudio.play()

        $('#audio-message').hide()

        playAudio('audio-files/1-boat-guard.mp3', '#button-1', '#button-2', 3000)
    }
    let playAudio2 = () => {
        playAudio('audio-files/2-dock-guard.mp3', '#button-2', '#button-3', 3000)
    }
    let playAudio3 = () => {
        playAudio('audio-files/3-dock-guard.mp3', '#button-3', '#button-4', 5000)
    }
    let playAudio4 = () => {
        playAudio('audio-files/4-quiz-welcome.mp3', '#button-4', '#button-5', 9000)
    }
    let playAudio5 = () => {
        playAudio('audio-files/5-quiz-1.mp3', '#button-5', '#quiz-question-1', 0)
    }

    let classKey;
    let className;
    let displayResult = () => {
        if (combatCount >= 7) {
            className = 'Warrior'
        } else if (magicCount >= 7) {
            className = 'Mage'
        } else if (stealthCount >= 7) {
            className = 'Thief'
        } else if (combatCount === 4) {
            className = 'Rogue'
        } else {
            classKey = new String(combatCount).toString() + new String(magicCount).toString() + new String(stealthCount).toString()
            className = quizResultLookup[classKey]
        }

        $('#class-name').text(className)
        $('#class-image').attr('src', classInfo[className].image)
        $('#class-description').text(classInfo[className].description)

        $('#quiz-question-10').hide()
        $('#quiz-result').show()
    }

    let restartQuiz = () => {
        combatCount = 0
        magicCount = 0
        stealthCount = 0
        currentQuestion = 1

        $('#quiz-result').hide()
        $('#quiz-question-1').show()
        playAudio5()
    }

    let quizResultLookup = {
        "226": "Acrobat",
        "316": "Agent",
        "550": "Archer",
        "541": "Archer",
        "532": "Archer",
        "514": "Archer",
        "505": "Archer",
        "136": "Assassin",
        "631": "Barbarian",
        "163": "Battlemage",
        "064": "Battlemage",
        "613": "Crusader",
        "361": "Healer",
        "640": "Knight",
        "622": "Knight",
        "604": "Knight",
        "235": "Monk",
        "325": "Pilgrim",
        "523": "Scout",
        "262": "Sorcerer",
        "343": "Spellsword",
        "244": "Spellsword",
        "145": "Spellsword",
        "046": "Spellsword",
        "334": "Warrior",
        "352": "Witchhunter",
        "253": "Witchhunter",
        "154": "Witchhunter",
        "055": "Witchhunter",
    }


    let classInfo = {
        "Acrobat": {
            "image": "image-files/Acrobat.jpg",
            "description": "Acrobat is a polite euphemism for agile burglars and second-story men. These thieves avoid detection by stealth, and rely on mobility and cunning to avoid capture."
        },
        "Agent": {
            "image": "image-files/Agent.jpg",
            "description": "Agents are operatives skilled in deception and avoidance, but trained in self-defense and the use of deadly force. Self-reliant and independent, agents devote themselves to personal goals, or to various patrons or causes."
        },
        "Archer": {
            "image": "image-files/Archer.jpg",
            "description": "Archers are fighters specializing in long-range combat and rapid movement. Opponents are kept at distance by ranged weapons and swift maneuver, and engaged in melee with sword and shield after the enemy is wounded and weary."
        },
        "Assassin": {
            "image": "image-files/Assassin.jpg",
            "description": "Assassins are killers who rely on stealth and mobility to approach victims undetected. Execution is with ranged weapons or with short blades for close work. Assassins include ruthless murderers and principled agents of noble causes."
        },
        "Barbarian": {
            "image": "image-files/Barbarian.jpg",
            "description": "Barbarians are the proud, savage warrior elite of the plains nomads, mountain tribes, and sea reavers. They tend to be brutal and direct, lacking civilized graces, but they glory in heroic feats, and excel in fierce, frenzied single combat."
        },
        "Battlemage": {
            "image": "image-files/Battlemage.jpg",
            "description": "Battlemages are wizard-warriors, trained in both lethal spellcasting and heavily armored combat. They sacrifice mobility and versatility for the ability to supplement melee and ranged attacks with elemental damage and summoned creatures."
        },
        "Crusader": {
            "image": "image-files/Crusader.jpg",
            "description": "Any heavily armored warrior with spellcasting powers and a good cause may call himself a Crusader. Crusaders do well by doing good. They hunt monsters and villains, making themselves rich by plunder as they rid the world of evil."
        },
        "Healer": {
            "image": "image-files/Healer.jpg",
            "description": "Healers are spellcasters who swear solemn oaths to heal the afflicted and cure the diseased. When threatened, they defend themselves with reason and disabling attacks and magic, relying on deadly force only in extremity."
        },
        "Knight": {
            "image": "image-files/Knight.jpg",
            "description": "Of noble birth, or distinguished in battle or tourney, knights are civilized warriors, schooled in letters and courtesy, governed by the codes of chivalry. In addition to the arts of war, knights study the lore of healing and enchantment."
        },
        "Mage": {
            "image": "image-files/Mage.jpg",
            "description": "Most mages claim to study magic for its intellectual rewards, but they also often profit from its practical applications. Varying widely in temperament and motivation, mages share but one thing in common - an avid love of spellcasting."
        },
        "Monk": {
            "image": "image-files/Monk.jpg",
            "description": "Monks are students of the ancient martial arts of hand-to-hand combat and unarmored self defense. Monks avoid detection by stealth, mobility, and agility, and are skilled with a variety of ranged and close-combat weapons."
        },
        "Pilgrim": {
            "image": "image-files/Pilgrim.jpg",
            "description": "Pilgrims are travellers, seekers of truth and enlightenment. They fortify themselves for road and wilderness with arms, armor, and magic, and through wide experience of the world, they become shrewd in commerce and persuasion."
        },
        "Rogue": {
            "image": "image-files/Rogue.jpg",
            "description": "Rogues are adventurers and opportunists with a gift for getting in and out of trouble. Relying variously on charm and dash, blades and business sense, they thrive on conflict and misfortune, trusting to their luck and cunning to survive."
        },
        "Scout": {
            "image": "image-files/Scout.jpg",
            "description": "Scouts rely on stealth to survey routes and opponents, using ranged weapons and skirmish tactics when forced to fight. By contrast with barbarians, in combat scouts tend to be cautious and methodical, rather than impulsive."
        },
        "Sorcerer": {
            "image": "image-files/Sorcerer.jpg",
            "description": "Though spellcasters by vocation, sorcerers rely most on summonings and enchantments. They are greedy for magic scrolls, rings, armor and weapons, and commanding undead and Daedric servants gratifies their egos."
        },
        "Spellsword": {
            "image": "image-files/Spellsword.jpg",
            "description": "Spellswords are spellcasting specialists trained to support Imperial troops in skirmish and in battle. Veteran spellswords are prized as mercenaries, and well-suited for careers as adventurers and soldiers-of-fortune."
        },
        "Thief": {
            "image": "image-files/Thief.jpg",
            "description": "Thieves are pickpockets and pilferers. Unlike robbers, who kill and loot, thieves typically choose stealth and subterfuge over violence, and often entertain romantic notions of their charm and cleverness in their acquisitive activities."
        },
        "Warrior": {
            "image": "image-files/Warrior.jpg",
            "description": "Warriors are the professional men-at-arms, soldiers, mercenaries, and adventurers of the Empire, trained with various weapons and armor styles, conditioned by long marches, and hardened by ambush, skirmish, and battle."
        },
        "Witchhunter": {
            "image": "image-files/Witchhunter.jpg",
            "description": "Witchhunters are dedicated to rooting out and destroying the perverted practices of dark cults and profane sorcery. They train for martial, magical, and stealthy war against vampires, witches, warlocks, and necromancers."
        },
    }

</script>

</html>
